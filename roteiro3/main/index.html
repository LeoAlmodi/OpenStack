
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Silva, J.; Souza, P.">
      
      
        <link rel="canonical" href="https://hsandmann.github.io/insper.cloud.template/roteiro3/main/">
      
      
        <link rel="prev" href="../../roteiro2/main/">
      
      
        <link rel="next" href="../../roteiro4/main/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Roteiro 3 - Computação em Nuvem</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%2032C28.7%2032%200%2060.7%200%2096v320c0%2035.3%2028.7%2064%2064%2064h224V368c0-26.5%2021.5-48%2048-48h112V96c0-35.3-28.7-64-64-64zm384%20320H336c-8.8%200-16%207.2-16%2016v112l32-32%2064-64z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M96%200C43%200%200%2043%200%2096v320c0%2053%2043%2096%2096%2096h320c17.7%200%2032-14.3%2032-32s-14.3-32-32-32v-64c17.7%200%2032-14.3%2032-32V32c0-17.7-14.3-32-32-32H96m0%20384h256v64H96c-17.7%200-32-14.3-32-32s14.3-32%2032-32m32-240c0-8.8%207.2-16%2016-16h192c8.8%200%2016%207.2%2016%2016s-7.2%2016-16%2016H144c-8.8%200-16-7.2-16-16m16%2048h192c8.8%200%2016%207.2%2016%2016s-7.2%2016-16%2016H144c-8.8%200-16-7.2-16-16s7.2-16%2016-16%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-40-176h24v-64h-24c-13.3%200-24-10.7-24-24s10.7-24%2024-24h48c13.3%200%2024%2010.7%2024%2024v88h8c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-80c-13.3%200-24-10.7-24-24s10.7-24%2024-24m40-208a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M480%2032c0-12.9-7.8-24.6-19.8-29.6S434.5.2%20425.3%209.3L381.7%2053c-48%2048-113.1%2075-181%2075H64c-35.3%200-64%2028.7-64%2064v96c0%2035.3%2028.7%2064%2064%2064v128c0%2017.7%2014.3%2032%2032%2032h64c17.7%200%2032-14.3%2032-32V352h8.7c67.9%200%20133%2027%20181%2075l43.6%2043.6c9.2%209.2%2022.9%2011.9%2034.9%206.9s19.8-16.6%2019.8-29.6V300.3c18.6-8.8%2032-32.5%2032-60.4s-13.4-51.6-32-60.4zm-64%2076.7v262.6C357.2%20317.8%20280.5%20288%20200.7%20288H192v-96h8.7c79.8%200%20156.5-29.8%20215.3-83.3%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M438.6%20105.4c12.5%2012.5%2012.5%2032.8%200%2045.3l-256%20256c-12.5%2012.5-32.8%2012.5-45.3%200l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200L160%20338.7l233.4-233.3c12.5-12.5%2032.8-12.5%2045.3%200z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-86.2-346.7c7.9-22.3%2029.1-37.3%2052.8-37.3h58.3c34.9%200%2063.1%2028.3%2063.1%2063.1%200%2022.6-12.1%2043.5-31.7%2054.8L280%20264.4c-.2%2013-10.9%2023.6-24%2023.6-13.3%200-24-10.7-24-24v-13.5c0-8.6%204.6-16.5%2012.1-20.8l44.3-25.4c4.7-2.7%207.6-7.7%207.6-13.1%200-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4%200-6.4%202.1-7.5%205.3l-.4%201.2c-4.4%2012.5-18.2%2019-30.6%2014.6s-19-18.2-14.6-30.6l.4-1.2zM224%20352a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%2032c14.2%200%2027.3%207.5%2034.5%2019.8l216%20368c7.3%2012.4%207.3%2027.7.2%2040.1S486.3%20480%20472%20480H40c-14.3%200-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7%2039.5%20241.8%2032%20256%2032m0%20128c-13.3%200-24%2010.7-24%2024v112c0%2013.3%2010.7%2024%2024%2024s24-10.7%2024-24V184c0-13.3-10.7-24-24-24m32%20224a32%2032%200%201%200-64%200%2032%2032%200%201%200%2064%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M459.1%2052.4%20442.6%206.5c-1.9-3.9-6.1-6.5-10.5-6.5s-8.5%202.6-10.4%206.5l-16.5%2045.9-46%2016.8c-4.3%201.6-7.3%205.9-7.2%2010.4%200%204.5%203%208.7%207.2%2010.2l45.7%2016.8%2016.8%2045.8c1.5%204.4%205.8%207.5%2010.4%207.5s8.9-3.1%2010.4-7.5l16.5-45.8%2045.7-16.8c4.2-1.5%207.2-5.7%207.2-10.2%200-4.6-3-8.9-7.2-10.4zm-132.4%2053c-12.5-12.5-32.8-12.5-45.3%200l-2.9%202.9c-22-8-45.8-12.3-70.5-12.3C93.1%2096%200%20189.1%200%20304s93.1%20208%20208%20208%20208-93.1%20208-208c0-24.7-4.3-48.5-12.2-70.5l2.9-2.9c12.5-12.5%2012.5-32.8%200-45.3l-80-80zM200%20192c-57.4%200-104%2046.6-104%20104v8c0%208.8-7.2%2016-16%2016s-16-7.2-16-16v-8c0-75.1%2060.9-136%20136-136h8c8.8%200%2016%207.2%2016%2016s-7.2%2016-16%2016z%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M416%20398.9c58.5-41.1%2096-104.1%2096-174.9C512%20100.3%20397.4%200%20256%200S0%20100.3%200%20224c0%2070.7%2037.5%20133.8%2096%20174.9V464c0%2026.5%2021.5%2048%2048%2048h48v-48c0-8.8%207.2-16%2016-16s16%207.2%2016%2016v48h64v-48c0-8.8%207.2-16%2016-16s16%207.2%2016%2016v48h48c26.5%200%2048-21.5%2048-48v-65.1M96%20256a64%2064%200%201%201%20128%200%2064%2064%200%201%201-128%200m256-64a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M320%200c17.7%200%2032%2014.3%2032%2032v64h120c39.8%200%2072%2032.2%2072%2072v272c0%2039.8-32.2%2072-72%2072H168c-39.8%200-72-32.2-72-72V168c0-39.8%2032.2-72%2072-72h120V32c0-17.7%2014.3-32%2032-32M208%20384c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zm96%200c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zm96%200c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zM264%20256a40%2040%200%201%200-80%200%2040%2040%200%201%200%2080%200m152%2040a40%2040%200%201%200%200-80%2040%2040%200%201%200%200%2080M48%20224h16v192H48c-26.5%200-48-21.5-48-48v-96c0-26.5%2021.5-48%2048-48m544%200c26.5%200%2048%2021.5%2048%2048v96c0%2026.5-21.5%2048-48%2048h-16V224z%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%200H128c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032v132.8c0%2011.8-3.3%2023.5-9.5%2033.5L10.3%20406.2C3.6%20417.2%200%20429.7%200%20442.6%200%20480.9%2031.1%20512%2069.4%20512h309.2c38.3%200%2069.4-31.1%2069.4-69.4%200-12.8-3.6-25.4-10.3-36.4L329.5%20230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7%200%2032-14.3%2032-32S337.7%200%20320%200zm-96%20196.8V64h64v132.8c0%2023.7%206.6%2046.9%2019%2067.1l34.5%2056.1h-171l34.5-56.1c12.4-20.2%2019-43.4%2019-67.1%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20216C0%20149.7%2053.7%2096%20120%2096h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064H64c-35.3%200-64-28.7-64-64V216m256%200c0-66.3%2053.7-120%20120-120h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064h-64c-35.3%200-64-28.7-64-64V216%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/badge.css">
    
      <link rel="stylesheet" href="../../termynal.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#objetivo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Computação em Nuvem" class="md-header__button md-logo" aria-label="Computação em Nuvem" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Computação em Nuvem
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Roteiro 3
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hsandmann/insper.cloud.template" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    github/insper.cloud.template
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Computação em Nuvem" class="md-nav__button md-logo" aria-label="Computação em Nuvem" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Computação em Nuvem
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hsandmann/insper.cloud.template" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    github/insper.cloud.template
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Roteiros
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Roteiros
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roteiro1/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roteiro 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roteiro2/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roteiro 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Roteiro 3
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Roteiro 3
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisitos" class="md-nav__link">
    <span class="md-ellipsis">
      Pré-requisitos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infraestrutura" class="md-nav__link">
    <span class="md-ellipsis">
      Infraestrutura
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infraestrutura">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-instalando-o-juju-controller" class="md-nav__link">
    <span class="md-ellipsis">
      1. Instalando o Juju Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-definindo-o-modelo-de-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Definindo o modelo de deploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ceph-osd" class="md-nav__link">
    <span class="md-ellipsis">
      3. Ceph OSD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-nova-compute" class="md-nav__link">
    <span class="md-ellipsis">
      4. Nova Compute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-mysql-innodb-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      5. MySQL InnoDB Cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-vault" class="md-nav__link">
    <span class="md-ellipsis">
      6. Vault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-neutron-networking" class="md-nav__link">
    <span class="md-ellipsis">
      7. Neutron Networking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-keystone" class="md-nav__link">
    <span class="md-ellipsis">
      8. Keystone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-rabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      9. RabbitMQ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-nova-cloud-controller" class="md-nav__link">
    <span class="md-ellipsis">
      10. Nova Cloud Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-placement" class="md-nav__link">
    <span class="md-ellipsis">
      11. Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-horizon-openstack-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      12. Horizon - OpenStack Dashboard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-glance" class="md-nav__link">
    <span class="md-ellipsis">
      13. Glance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-ceph-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      14. Ceph Monitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-cinder" class="md-nav__link">
    <span class="md-ellipsis">
      15. Cinder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-ceph-rados-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      16. Ceph RADOS Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-ceph-osd-integration" class="md-nav__link">
    <span class="md-ellipsis">
      17. Ceph-OSD Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-passo-1-autenticacao" class="md-nav__link">
    <span class="md-ellipsis">
      1. Passo 1: Autenticação
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-passo-2-horizon" class="md-nav__link">
    <span class="md-ellipsis">
      2. Passo 2: Horizon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-passo-3-imagens-e-flavors" class="md-nav__link">
    <span class="md-ellipsis">
      3. Passo 3: Imagens e Flavors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-passo-4-rede-externa" class="md-nav__link">
    <span class="md-ellipsis">
      4. Passo 4: Rede Externa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-passo-5-rede-interna-e-roteador" class="md-nav__link">
    <span class="md-ellipsis">
      5. Passo 5: Rede Interna e Roteador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-passo-6-conexao" class="md-nav__link">
    <span class="md-ellipsis">
      6. Passo 6: Conexão
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-passo-7-instancia" class="md-nav__link">
    <span class="md-ellipsis">
      7. Passo 7: Instância
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#escalando-os-nos" class="md-nav__link">
    <span class="md-ellipsis">
      Escalando os nós
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      App
    </span>
  </a>
  
    <nav class="md-nav" aria-label="App">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etapas" class="md-nav__link">
    <span class="md-ellipsis">
      Etapas:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roteiro4/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roteiro 4
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../projeto/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projeto
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisitos" class="md-nav__link">
    <span class="md-ellipsis">
      Pré-requisitos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infraestrutura" class="md-nav__link">
    <span class="md-ellipsis">
      Infraestrutura
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infraestrutura">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-instalando-o-juju-controller" class="md-nav__link">
    <span class="md-ellipsis">
      1. Instalando o Juju Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-definindo-o-modelo-de-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Definindo o modelo de deploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ceph-osd" class="md-nav__link">
    <span class="md-ellipsis">
      3. Ceph OSD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-nova-compute" class="md-nav__link">
    <span class="md-ellipsis">
      4. Nova Compute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-mysql-innodb-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      5. MySQL InnoDB Cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-vault" class="md-nav__link">
    <span class="md-ellipsis">
      6. Vault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-neutron-networking" class="md-nav__link">
    <span class="md-ellipsis">
      7. Neutron Networking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-keystone" class="md-nav__link">
    <span class="md-ellipsis">
      8. Keystone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-rabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      9. RabbitMQ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-nova-cloud-controller" class="md-nav__link">
    <span class="md-ellipsis">
      10. Nova Cloud Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-placement" class="md-nav__link">
    <span class="md-ellipsis">
      11. Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-horizon-openstack-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      12. Horizon - OpenStack Dashboard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-glance" class="md-nav__link">
    <span class="md-ellipsis">
      13. Glance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-ceph-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      14. Ceph Monitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-cinder" class="md-nav__link">
    <span class="md-ellipsis">
      15. Cinder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-ceph-rados-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      16. Ceph RADOS Gateway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-ceph-osd-integration" class="md-nav__link">
    <span class="md-ellipsis">
      17. Ceph-OSD Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-passo-1-autenticacao" class="md-nav__link">
    <span class="md-ellipsis">
      1. Passo 1: Autenticação
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-passo-2-horizon" class="md-nav__link">
    <span class="md-ellipsis">
      2. Passo 2: Horizon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-passo-3-imagens-e-flavors" class="md-nav__link">
    <span class="md-ellipsis">
      3. Passo 3: Imagens e Flavors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-passo-4-rede-externa" class="md-nav__link">
    <span class="md-ellipsis">
      4. Passo 4: Rede Externa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-passo-5-rede-interna-e-roteador" class="md-nav__link">
    <span class="md-ellipsis">
      5. Passo 5: Rede Interna e Roteador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-passo-6-conexao" class="md-nav__link">
    <span class="md-ellipsis">
      6. Passo 6: Conexão
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-passo-7-instancia" class="md-nav__link">
    <span class="md-ellipsis">
      7. Passo 7: Instância
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#escalando-os-nos" class="md-nav__link">
    <span class="md-ellipsis">
      Escalando os nós
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      App
    </span>
  </a>
  
    <nav class="md-nav" aria-label="App">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etapas" class="md-nav__link">
    <span class="md-ellipsis">
      Etapas:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Roteiro 3</h1>

<h2 id="objetivo">Objetivo</h2>
<ul>
<li>Entender os conceitos básicos de Private Cloud.</li>
<li>Aprofundar conceitos sobre redes virtuais SDN.</li>
</ul>
<h4 id="pre-requisitos">Pré-requisitos</h4>
<ul>
<li>Terminar de Ler o capítulo <a href="https://documentation.ubuntu.com/juju/3.6/reference/juju-cli/">Juju</a>.</li>
<li>Realizar a leitura sobre o Openstack.<ul>
<li><a href="https://www.openstack.org/">https://www.openstack.org/</a></li>
<li><a href="https://www.openstack.org/software/">https://www.openstack.org/software/</a></li>
<li><a href="https://ubuntu.com/openstack/what-is-openstack">https://ubuntu.com/openstack/what-is-openstack</a></li>
</ul>
</li>
<li>Realizar a leitura sobre o Openstack. [Jackson et al - Cap. 1 até Cap. 5].</li>
</ul>
<h2 id="infraestrutura">Infraestrutura</h2>
<p>Nesse roteiro vamos instalar um conjunto de aplicações denominado Openstack que vai permitir distribuirmos virtual machines usando os nós disponíveis no kit.</p>
<p>Até o momento usamos o MAAS para orquestrar o bare metal e o juju para cuidar do deployment de aplicações (exemplo grafana e prometheus). Agora, vamos utilizar o Openstack para criar VMs e distribuir os serviços em todas as máquinas kit com maior eficiência.</p>
<h3 id="1-instalando-o-juju-controller">1. Instalando o Juju Controller</h3>
<p>Adicionar a tag controller na máquina server1:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>juju<span class="w"> </span>bootstrap<span class="w"> </span>--bootstrap-series<span class="o">=</span>jammy<span class="w"> </span>--constraints<span class="w"> </span><span class="nv">tags</span><span class="o">=</span>controller<span class="w"> </span>maas-one<span class="w"> </span>maas-controller
</span></code></pre></div>
<h3 id="2-definindo-o-modelo-de-deploy">2. Definindo o modelo de deploy</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>juju<span class="w"> </span>add-model<span class="w"> </span>--config<span class="w"> </span>default-series<span class="o">=</span>jammy<span class="w"> </span>openstack
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>juju<span class="w"> </span>switch<span class="w"> </span>maas-controller:openstack
</span></code></pre></div>
<h3 id="3-ceph-osd">3. Ceph OSD</h3>
<p><strong>Arquivo:</strong> <code>ceph-osd.yaml</code></p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">ceph-osd</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">osd-devices</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/sda /dev/sdb</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--channel<span class="w"> </span>quincy/stable<span class="w"> </span>--config<span class="w"> </span>ceph-osd.yaml<span class="w"> </span>--constraints<span class="w"> </span><span class="nv">tags</span><span class="o">=</span>compute<span class="w"> </span>ceph-osd
</span></code></pre></div></p>
<h3 id="4-nova-compute">4. Nova Compute</h3>
<p><strong>Arquivo:</strong> <code>nova-compute.yaml</code>    </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">nova-compute</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nt">config-flags</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default_ephemeral_format=ext4</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">enable-live-migration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">enable-resize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="nt">migration-auth-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="nt">virt-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qemu</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--to<span class="w"> </span><span class="m">0</span>,1,2<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>--config<span class="w"> </span>nova-compute.yaml<span class="w"> </span>nova-compute
</span></code></pre></div>
<h3 id="5-mysql-innodb-cluster">5. MySQL InnoDB Cluster</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--to<span class="w"> </span>lxd:0,lxd:1,lxd:2<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-innodb-cluster
</span></code></pre></div>
<h3 id="6-vault">6. Vault</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>vault<span class="w"> </span>--channel<span class="w"> </span><span class="m">1</span>.8/stable
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>vault-mysql-router
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>vault-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>vault-mysql-router:shared-db<span class="w"> </span>vault:shared-db
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Unseal</p>
<p>Vault must now be initialised and unsealed. The vault charm will also need to be authorised to carry out certain tasks. These steps are covered in the <a href="https://opendev.org/openstack/charm-vault/src/branch/stable/1.8/src/README.md#post-deployment-tasks">vault charm documentation</a>. Perform them <strong>NOW</strong>.</p>
</div>
<div class="admonition info">
<p class="admonition-title">CA Certificate (Self-signed)</p>
<p>Provide Vault with a CA certificate, we need to generate a self-signed CA certificate, so it can issue certificates to cloud API services. This is covered on the <a href="https://docs.openstack.org/charm-guide/latest/admin/security/tls.html#add-ca-certificate">Managing TLS certificates</a> page. Do this now.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>juju<span class="w"> </span>run<span class="w"> </span>vault/leader<span class="w"> </span>generate-root-ca
</span></code></pre></div>
</div>
<p>Cloud applications are TLS-enabled via the vault:certificates relation. Below we start with the cloud database. Although the latter has a self-signed certificate, it is recommended to use the one signed by Vault’s CA:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>mysql-innodb-cluster:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div></p>
<h3 id="7-neutron-networking">7. Neutron Networking</h3>
<p><strong>Arquivo:</strong> <code>neutron.yaml</code> </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">ovn-chassis</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">bridge-interface-mappings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">br-ex:eth0</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">ovn-bridge-mappings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">physnet1:br-ex</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="nt">neutron-api</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="nt">neutron-security-groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">  </span><span class="nt">flat-network-providers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">physnet1</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--to<span class="w"> </span>lxd:0,lxd:1,lxd:2<span class="w"> </span>--channel<span class="w"> </span><span class="m">22</span>.03/stable<span class="w"> </span>ovn-central
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:1<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>--config<span class="w"> </span>neutron.yaml<span class="w"> </span>neutron-api
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>neutron-api-plugin-ovn
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">22</span>.03/stable<span class="w"> </span>--config<span class="w"> </span>neutron.yaml<span class="w"> </span>ovn-chassis
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api-plugin-ovn:neutron-plugin<span class="w"> </span>neutron-api:neutron-plugin-api-subordinate
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api-plugin-ovn:ovsdb-cms<span class="w"> </span>ovn-central:ovsdb-cms
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ovn-chassis:ovsdb<span class="w"> </span>ovn-central:ovsdb
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ovn-chassis:nova-compute<span class="w"> </span>nova-compute:neutron-plugin
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api:certificates<span class="w"> </span>vault:certificates
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api-plugin-ovn:certificates<span class="w"> </span>vault:certificates
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ovn-central:certificates<span class="w"> </span>vault:certificates
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ovn-chassis:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>neutron-api-mysql-router
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>neutron-api-mysql-router:shared-db<span class="w"> </span>neutron-api:shared-db
</span></code></pre></div>
<h3 id="8-keystone">8. Keystone</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:0<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>keystone
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>keystone-mysql-router
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>keystone-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>keystone-mysql-router:shared-db<span class="w"> </span>keystone:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>keystone:identity-service<span class="w"> </span>neutron-api:identity-service
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>keystone:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<h3 id="9-rabbitmq">9. RabbitMQ</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>--channel<span class="w"> </span><span class="m">3</span>.9/stable<span class="w"> </span>rabbitmq-server
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>rabbitmq-server:amqp<span class="w"> </span>neutron-api:amqp
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>rabbitmq-server:amqp<span class="w"> </span>nova-compute:amqp
</span></code></pre></div>
<h3 id="10-nova-cloud-controller">10. Nova Cloud Controller</h3>
<p><strong>Arquivo:</strong> <code>ncc.yaml</code> </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">nova-cloud-controller</span><span class="p">:</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">network-manager</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Neutron</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>--config<span class="w"> </span>ncc.yaml<span class="w"> </span>nova-cloud-controller
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>ncc-mysql-router
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ncc-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ncc-mysql-router:shared-db<span class="w"> </span>nova-cloud-controller:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>nova-cloud-controller:identity-service<span class="w"> </span>keystone:identity-service
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>nova-cloud-controller:amqp<span class="w"> </span>rabbitmq-server:amqp
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>nova-cloud-controller:neutron-api<span class="w"> </span>neutron-api:neutron-api
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>juju<span class="w"> </span>integrate<span class="w"> </span>nova-cloud-controller:cloud-compute<span class="w"> </span>nova-compute:cloud-compute
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>juju<span class="w"> </span>integrate<span class="w"> </span>nova-cloud-controller:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<h3 id="11-placement">11. Placement</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>placement
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>placement-mysql-router
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>placement-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>placement-mysql-router:shared-db<span class="w"> </span>placement:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>placement:identity-service<span class="w"> </span>keystone:identity-service
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>placement:placement<span class="w"> </span>nova-cloud-controller:placement
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>placement:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<h3 id="12-horizon-openstack-dashboard">12. Horizon - OpenStack Dashboard</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>openstack-dashboard
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>dashboard-mysql-router
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>dashboard-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>dashboard-mysql-router:shared-db<span class="w"> </span>openstack-dashboard:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>openstack-dashboard:identity-service<span class="w"> </span>keystone:identity-service
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>openstack-dashboard:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<h3 id="13-glance">13. Glance</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:2<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>glance
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>glance-mysql-router
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance-mysql-router:shared-db<span class="w"> </span>glance:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance:image-service<span class="w"> </span>nova-cloud-controller:image-service
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance:image-service<span class="w"> </span>nova-compute:image-service
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance:identity-service<span class="w"> </span>keystone:identity-service
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>juju<span class="w"> </span>integrate<span class="w"> </span>glance:certificates<span class="w"> </span>vault:certificates
</span></code></pre></div>
<h3 id="14-ceph-monitor">14. Ceph Monitor</h3>
<p><strong>Arquivo:</strong> <code>ceph-mon.yaml</code> </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">ceph-mon</span><span class="p">:</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="nt">expected-osd-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">  </span><span class="nt">monitor-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--to<span class="w"> </span>lxd:0,lxd:1,lxd:2<span class="w"> </span>--channel<span class="w"> </span>quincy/stable<span class="w"> </span>--config<span class="w"> </span>ceph-mon.yaml<span class="w"> </span>ceph-mon
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ceph-mon:osd<span class="w"> </span>ceph-osd:mon
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ceph-mon:client<span class="w"> </span>nova-compute:ceph
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ceph-mon:client<span class="w"> </span>glance:ceph
</span></code></pre></div>
<h3 id="15-cinder">15. Cinder</h3>
<p><strong>Arquivo:</strong> <code>cinder.yaml</code> </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">cinder</span><span class="p">:</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nt">block-device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">  </span><span class="nt">glance-api-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:1<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>--config<span class="w"> </span>cinder.yaml<span class="w"> </span>cinder
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span><span class="m">8</span>.0/stable<span class="w"> </span>mysql-router<span class="w"> </span>cinder-mysql-router
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder-mysql-router:db-router<span class="w"> </span>mysql-innodb-cluster:db-router
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder-mysql-router:shared-db<span class="w"> </span>cinder:shared-db
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder:cinder-volume-service<span class="w"> </span>nova-cloud-controller:cinder-volume-service
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder:identity-service<span class="w"> </span>keystone:identity-service
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder:amqp<span class="w"> </span>rabbitmq-server:amqp
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder:image-service<span class="w"> </span>glance:image-service
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder:certificates<span class="w"> </span>vault:certificates<span class="w"> </span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--channel<span class="w"> </span>yoga/stable<span class="w"> </span>cinder-ceph
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder-ceph:storage-backend<span class="w"> </span>cinder:storage-backend
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder-ceph:ceph<span class="w"> </span>ceph-mon:client
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>juju<span class="w"> </span>integrate<span class="w"> </span>cinder-ceph:ceph-access<span class="w"> </span>nova-compute:ceph-access
</span></code></pre></div>
<h3 id="16-ceph-rados-gateway">16. Ceph RADOS Gateway</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>juju<span class="w"> </span>deploy<span class="w"> </span>--to<span class="w"> </span>lxd:0<span class="w"> </span>--channel<span class="w"> </span>quincy/stable<span class="w"> </span>ceph-radosgw
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>juju<span class="w"> </span>integrate<span class="w"> </span>ceph-radosgw:mon<span class="w"> </span>ceph-mon:radosgw
</span></code></pre></div>
<h3 id="17-ceph-osd-integration">17. Ceph-OSD Integration</h3>
<div class="admonition info">
<p class="admonition-title">Atenção!!!</p>
<p>Execute o comando abaixo apenas se você estiver certeza de que todos os procedimentos anteriores foram realizados com sucesso.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>juju<span class="w"> </span>config<span class="w"> </span>ceph-osd<span class="w"> </span>osd-devices<span class="o">=</span><span class="s1">&#39;/dev/sdb&#39;</span>
</span></code></pre></div>
</div>
<p>At this time the Unit section output to command juju status should look similar to this:</p>
<p><a class="glightbox" href="https://insper.github.io/computacao-nuvem/assets/screenshots/roteiro3.openstack.check4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="https://insper.github.io/computacao-nuvem/assets/screenshots/roteiro3.openstack.check4.png" /></a></p>
<h2 id="setup">Setup</h2>
<p>Chegou a hora de configurar os serviços que controlam:</p>
<ul>
<li>as VMs (Nova);</li>
<li>os volumes de disco (Cinder), e;</li>
<li>a estrutura de rede virtual (Neutron).</li>
</ul>
<p>Para isso, é preciso:</p>
<ol>
<li>Carregar as variáveis de ambiente e se autenticar (Keystone) no sistema - openrc;</li>
<li>Utilizar o dashboard (Horizon) para visualizar as mudanças que estão sendo feitas;</li>
<li>Importar uma imagem do Ubuntu Jammy para o Glance (servidor de imagens);</li>
<li>Criar os flavors (instance type) para as VMs;</li>
<li>Criar uma rede externa (subnet) para conectar as VMs à rede física;</li>
<li>Criar uma rede interna (subnet) e um roteador (router) para conectar as VMs à rede externa.</li>
</ol>
<h3 id="1-passo-1-autenticacao">1. Passo 1: Autenticação</h3>
<p>Crie, download, o arquivo openrc com as credenciais de acesso ao OpenStack. O arquivo deve conter as seguintes variáveis de credenciais para o OpenStack.</p>
<h3 id="2-passo-2-horizon">2. Passo 2: Horizon</h3>
<p>Acesse o Horizon (dashboard) como administrador e mantenha ele aberto durante todo o setup do openstack (para ver as mudanças acontecendo!).</p>
<figure>
<p><a class="glightbox" href="../img/R3_T1_a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 1 - a" src="../img/R3_T1_a.png" /></a></p>
<figcaption>
<p>Status do JUJU.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T1_b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 1 - b" src="../img/R3_T1_b.png" /></a></p>
<figcaption>
<p>Dashboard do <em>MAAS</em> com as máquinas.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T1_c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 1 - c" src="../img/R3_T1_c.png" /></a></p>
<figcaption>
<p>Aba compute overview no <em>OpenStack</em> Dashboard.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T1_d.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 1 - d" src="../img/R3_T1_d.png" /></a></p>
<figcaption>
<p>Aba compute instances no <em>OpenStack</em> Dashboard.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T1_e.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 1 - e" src="../img/R3_T1_e.png" /></a></p>
<figcaption>
<p>Aba network topology no <em>OpenStack</em> Dashboard.</p>
</figcaption>
</figure>
<h3 id="3-passo-3-imagens-e-flavors">3. Passo 3: Imagens e Flavors</h3>
<p>Usando a documentação oficial, faça o seguinte:</p>
<ul>
<li>Instale o client do Openstack no main via snap.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sudo<span class="w"> </span>snap<span class="w"> </span>install<span class="w"> </span>openstackclients
</span></code></pre></div>
<ul>
<li>Carregue as credenciais em openrc: </li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nb">source</span><span class="w"> </span>~/openrc
</span></code></pre></div>
<ul>
<li>Verifique os serviços disponíveis no Openstack:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>openstack<span class="w"> </span>service<span class="w"> </span>list
</span></code></pre></div>
<ul>
<li>Faça pequenos ajustes na rede:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>juju<span class="w"> </span>config<span class="w"> </span>neutron-api<span class="w"> </span>enable-ml2-dns<span class="o">=</span><span class="s2">&quot;true&quot;</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>juju<span class="w"> </span>config<span class="w"> </span>neutron-api-plugin-ovn<span class="w"> </span>dns-servers<span class="o">=</span><span class="s2">&quot;172.16.0.1&quot;</span>
</span></code></pre></div>
<ul>
<li>
<p>Importe a imagem do Ubuntu Jammy. Você precisará procurar esta imagem.</p>
</li>
<li>
<p>Analise o comando:</p>
</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>openstack<span class="w"> </span>flavor<span class="w"> </span>create<span class="w"> </span>--help
</span></code></pre></div>
<ul>
<li>Crie os flavors (instance type) - SEM ephemeral disk:</li>
</ul>
<table>
<thead>
<tr>
<th>Flavor Name</th>
<th style="text-align: center;">vCPUs</th>
<th style="text-align: center;">RAM (GB)</th>
<th style="text-align: right;">Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td>m1.tiny</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: right;">20</td>
</tr>
<tr>
<td>m1.small</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2</td>
<td style="text-align: right;">20</td>
</tr>
<tr>
<td>m1.medium</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">4</td>
<td style="text-align: right;">20</td>
</tr>
<tr>
<td>m1.large</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">8</td>
<td style="text-align: right;">20</td>
</tr>
</tbody>
</table>
<h3 id="4-passo-4-rede-externa">4. Passo 4: Rede Externa</h3>
<ul>
<li>Configure a rede externa. Usar uma faixa de alocação entre 172.16.7.0 e 172.16.8.255.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>openstack<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--external<span class="w"> </span>--share<span class="w"> </span><span class="se">\</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">   </span>--provider-network-type<span class="w"> </span>flat<span class="w"> </span>--provider-physical-network<span class="w"> </span>physnet1<span class="w"> </span><span class="se">\</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">   </span>ext_net
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>openstack<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--network<span class="w"> </span>ext_net<span class="w"> </span>--no-dhcp<span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="w">   </span>--gateway<span class="w"> </span><span class="m">172</span>.16.0.1<span class="w"> </span>--subnet-range<span class="w"> </span><span class="m">172</span>.16.0.0/20<span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">   </span>--allocation-pool<span class="w"> </span><span class="nv">start</span><span class="o">=</span><span class="m">172</span>.16.7.0,end<span class="o">=</span><span class="m">172</span>.16.8.255<span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">   </span>ext_subnet
</span></code></pre></div>
<h3 id="5-passo-5-rede-interna-e-roteador">5. Passo 5: Rede Interna e Roteador</h3>
<ul>
<li>Crie a rede interna e o roteador. Usar a subnet 192.169.0.0/24. Não use DNS.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>openstack<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--internal<span class="w"> </span>user1_net
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>openstack<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--network<span class="w"> </span>user1_net<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">   </span>--subnet-range<span class="w"> </span><span class="m">192</span>.169.0.0/24<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="w">   </span>--allocation-pool<span class="w"> </span><span class="nv">start</span><span class="o">=</span><span class="m">192</span>.169.0.10,end<span class="o">=</span><span class="m">192</span>.169.0.90<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">   </span>user1_subnet
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>openstack<span class="w"> </span>router<span class="w"> </span>create<span class="w"> </span>user1_router
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>openstack<span class="w"> </span>router<span class="w"> </span>add<span class="w"> </span>subnet<span class="w"> </span>user1_router<span class="w"> </span>user1_subnet
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>openstack<span class="w"> </span>router<span class="w"> </span><span class="nb">set</span><span class="w"> </span>user1_router<span class="w"> </span>--external-gateway<span class="w"> </span>ext_net
</span></code></pre></div>
<h3 id="6-passo-6-conexao">6. Passo 6: Conexão</h3>
<ul>
<li><em>Importe</em> (upload) um key-pair, usando public key (id_rsa.pub) da máquina onde está o MaaS.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>openstack<span class="w"> </span>keypair<span class="w"> </span>create<span class="w"> </span>--public-key<span class="w"> </span>~/.ssh/id_rsa.pub<span class="w"> </span>user1
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>openstack<span class="w"> </span>security<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--description<span class="w"> </span><span class="s1">&#39;Allow SSH&#39;</span><span class="w"> </span>Allow_SSH
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>openstack<span class="w"> </span>security<span class="w"> </span>group<span class="w"> </span>rule<span class="w"> </span>create<span class="w"> </span>--proto<span class="w"> </span>tcp<span class="w"> </span>--dst-port<span class="w"> </span><span class="m">22</span><span class="w"> </span>Allow_SSH
</span></code></pre></div>
<ul>
<li>
<p>Via o Horizon (dashboard), como administrador:</p>
<ul>
<li>Adicione a liberação do <em>SSH</em> e <em>ALL ICMP</em> no security group default.</li>
<li>Verifique se a topologia de rede faz sentido. Ela deve ser semelhante ao projeto da sua rede física, porém com mais um nível dentro. <em>Atenção</em>: a rede não existe fisicamente, é tudo virtual.</li>
</ul>
</li>
</ul>
<h3 id="7-passo-7-instancia">7. Passo 7: Instância</h3>
<ul>
<li>Dispare uma instância m1.tiny com o nome client e sem Novo Volume;</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>openstack<span class="w"> </span>server<span class="w"> </span>create<span class="w"> </span>--image<span class="w"> </span>jammy-amd64<span class="w"> </span>--flavor<span class="w"> </span>m1.tiny<span class="w">    </span>--key-name<span class="w"> </span>user1<span class="w"> </span>--network<span class="w"> </span>user1_net<span class="w"> </span>--security-group<span class="w"> </span>Allow_SSH<span class="w">    </span>client
</span></code></pre></div>
<ul>
<li>Aloque um floating IP para a instância;</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="nv">FLOATING_IP</span><span class="o">=</span><span class="k">$(</span>openstack<span class="w"> </span>floating<span class="w"> </span>ip<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>value<span class="w"> </span>-c<span class="w"> </span>floating_ip_address<span class="w"> </span>ext_net<span class="k">)</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>openstack<span class="w"> </span>server<span class="w"> </span>add<span class="w"> </span>floating<span class="w"> </span>ip<span class="w"> </span>client<span class="w"> </span><span class="nv">$FLOATING_IP</span>
</span></code></pre></div>
<ul>
<li>Teste a conexão SSH! Em caso de erro, volte e verifique se as etapas anteriores estão corretas.</li>
</ul>
<figure>
<p><a class="glightbox" href="../img/R3_T2_a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 2 - a" src="../img/R3_T2_a.png" /></a></p>
<figcaption>
<p>Dashboard do <em>MAAS</em> com as máquinas.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T2_b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 2 - b" src="../img/R3_T2_b.png" /></a></p>
<figcaption>
<p>Aba compute overview no <em>OpenStack</em>.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T2_c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 2 - c" src="../img/R3_T2_c.png" /></a></p>
<figcaption>
<p>Aba compute instances no <em>OpenStack</em>.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T2_d.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 2 - d" src="../img/R3_T2_d.png" /></a></p>
<figcaption>
<p>Aba network topology no <em>OpenStack</em>.</p>
</figcaption>
</figure>
<ol>
<li>Enquanto o Dashboard do MAAS não muda, após criar a instância, as abas <em>Compute Overview</em>, <em>Compute Instances</em> e <em>Network Topology</em> mostram as mudanças. No qual, quando não existia nenhuma instância, não aparecia nada em nenhuma das abas, e, agora, aparece a instância <em>client</em>, na topologia mostra o esquema da rede, e na aba de overview mostra a visão geral de tudo.</li>
</ol>
<h3 id="escalando-os-nos">Escalando os nós</h3>
<p>No OpenStack, escalar os nós de configuração é essencial para melhorar a capacidade, a resiliência e o desempenho dos serviços em um ambiente de nuvem. Ao adicionar novos nós de computing e block storage, a infraestrutura ganha flexibilidade para lidar com o aumento de carga e a demanda por recursos.</p>
<p>Benefícios da Escala dos Nós de Configuração Aumento de Capacidade de Processamento: Ao escalar os nós de computing, é possível executar mais instâncias de máquinas virtuais (VMs) simultaneamente, o que permite atender a mais usuários e aplicações. Esse aumento de capacidade é fundamental para garantir o atendimento à demanda, especialmente em ambientes que precisam se adaptar rapidamente a flutuações de uso.</p>
<p>Alta Disponibilidade e Tolerância a Falhas: A distribuição de serviços críticos, como computing e block storage, em múltiplos nós contribui para uma arquitetura mais robusta. Com mais nós, falhas em uma máquina têm impacto reduzido no sistema geral, uma vez que as cargas podem ser automaticamente redirecionadas para outros nós ativos.</p>
<p>Melhoria de Desempenho e Latência Reduzida: Com mais nós de armazenamento e computação, os dados e os processos estão fisicamente mais próximos dos recursos e das VMs que os utilizam, reduzindo latências de acesso e melhorando a eficiência geral do sistema.</p>
<p>Escalabilidade Horizontal: Em vez de aumentar a capacidade de uma única máquina (escalabilidade vertical), adicionar novos nós permite uma escalabilidade horizontal, que é mais econômica e eficiente em termos de recursos, além de ser mais fácil de gerenciar. OpenStack é ideal para esse tipo de escalabilidade, pois os serviços de orquestração como Nova e Ceph distribuem automaticamente as cargas entre os novos nós.</p>
<p>Vamos adicionar o nó reserva ao openstack no cluster como nó de computing e block storage.</p>
<ul>
<li>
<p>Verfique no Dashboard do MaaS se ainda há uma máquina disponível (máquina que reservamos/allocated). Faça o release da máquina que está ALLOCATED (cuidado para não errar!)</p>
</li>
<li>
<p>Instale o hypervisor, realizando o deploy na máquina:</p>
</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>juju<span class="w"> </span>add-unit<span class="w"> </span>nova-compute
</span></code></pre></div>
<ul>
<li>Anote o número da máquina adicionada no status e instale o block storage:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>juju<span class="w"> </span>add-unit<span class="w"> </span>--to<span class="w"> </span><span class="m">3</span><span class="w"> </span>ceph-osd
</span></code></pre></div>
<figure>
<p><a class="glightbox" href="../img/R3_T3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 3" src="../img/R3_T3.png" /></a></p>
<figcaption>
<p>Arquitetura de rede.</p>
</figcaption>
</figure>
<h2 id="app">App</h2>
<p><strong>TAREFA</strong>: Levantar as aplicações em máquinas virtuais do Openstack:</p>
<ul>
<li>2 instâncias com a API do projeto, etapa 1;</li>
<li>1 instância com banco de dados, etapa 1, e;</li>
<li>1 instância com LoadBalancer, Nginx.</li>
</ul>
<h4 id="etapas">Etapas:</h4>
<ol>
<li>
<p><strong>Primeiro Passo</strong>: Criar as instâncias e seus floating IPs.</p>
</li>
<li>
<p><strong>Segundo Passo</strong>: LoadBalancer:</p>
</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nginx
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/nginx/sites-available/default
</span></code></pre></div>
<p>Coloque as seguintes linhas:</p>
<ul>
<li>upstream backend { server 172.16.8.234; server 172.16.7.4; }</li>
<li>location / { proxy_pass http://backend; }</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>sudo<span class="w"> </span>service<span class="w"> </span>nginx<span class="w"> </span>restart
</span></code></pre></div>
<ol>
<li>
<p><strong>Terceiro Passo</strong>: DataBase:</p>
</li>
<li>
<p><strong>Quarto Passo</strong>: APIs:</p>
</li>
</ol>
<figure>
<p><a class="glightbox" href="../img/R3_T4_2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_2.png" /></a></p>
<figcaption>
<p>Arquitetura de rede da infraestrutura dentro do Dashboard do Openstack.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_3.png" /></a></p>
<figcaption>
<p>Lista de VMs utilizadas com nome e IPs alocados.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_4.png" /></a></p>
<figcaption>
<p>Dashboard do FastAPI conectado via máquina Nginx/LB.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_4_lb.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_4_lb.png" /></a></p>
<figcaption>
<p>Server (máquina física) que a instância load balancer foi alocada pelo OpenStack.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_4_api1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_4_api1.png" /></a></p>
<figcaption>
<p>Server (máquina física) que a instância api 1 foi alocada pelo OpenStack.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_4_api2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_4_api2.png" /></a></p>
<figcaption>
<p>Server (máquina física) que a instância api 2 foi alocada pelo OpenStack.</p>
</figcaption>
</figure>
<figure>
<p><a class="glightbox" href="../img/R3_T4_4_db.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Tarefa 4 " src="../img/R3_T4_4_db.png" /></a></p>
<figcaption>
<p>Server (máquina física) que a instância db (database) foi alocada pelo OpenStack.</p>
</figcaption>
</figure>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "content.tooltips", "navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.path", "navigation.tracking", "navigation.expand"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../assets/_markdown_exec_pyodide.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../assets/javascripts/badge.js" async></script>
      
        <script src="../../termynal.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>